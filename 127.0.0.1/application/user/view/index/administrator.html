{extend name="public/base" /}
{block name="body"}

<script src="__PUBLIC__/plugs/echarts/echarts.min.js"></script>

<!-- <script src="__PUBLIC__/plugs/highcharts/js/highcharts.js"></script>
 -->
<script src="__PUBLIC__/plugs/highcharts/highcharts.js"></script>
<script src="__PUBLIC__/plugs/highcharts/modules/series-label.js"></script>
<script src="__PUBLIC__/plugs/highcharts/modules/exporting.js"></script>
<script src="__PUBLIC__/plugs/highcharts/modules/export-data.js"></script>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/controller.css"/>


<!--<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/nosetbottom_pz.css"/>-->

<style>
	.c_entrancedata li i img{
		width: 60px;
	}

	.c_entrancedata li {
		text-align: left;
		width: 49%;
	}

	.c_entrancedata li p {
		margin-top: 3px;
	}
	.c_entrancedata_r p{
		font-size:16px;
	}
	.c_entrancedata_r a {
    font-size: 14px;
	}
	.c_entrancedata li {
    margin-bottom: 78px;
	}
	.c_entrancedata li i {
    margin-right: 17px;
	}

</style>

<div class="row ">

  <div class="col-lg-12" style="padding:;">
	  <div class="panel panel-default">
  	  <div class="panel-body" style="padding:15px 30px;">
  			<div class="panel-top">
  				<span class="panel-title"><img src="__PUBLIC__/img/wodeshuju.png" style="width:16px;height:18px;"/>我的数据</span>
  			</div>
				<style media="screen">
					/* 我的数据模块  样式 */
					.pzgl_dialstatistic{
						margin-top: 29px;
						padding-left: 0px;
						margin-bottom: 20px;
						display: flex;
						display: -webkit-flex;
						flex-wrap: wrap;
						-webkit-flex-wrap: wrap;
					}
					.sj_pzgl_dialstatistic{

					}
					.pzgl_dialstatistic.sj_pzgl_dialstatistic li {
				    display: inline-block;
				    width: 18.8%;
				    /* height: 174px; */
				    /* min-width: 275px; */
				    margin-right: 1.5%;
				    /* background: url(../images/controll/blue.png) 100% 100% no-repeat; */
				    background-size: 100% 100%;
				    padding: 24px 23px;
				    text-align: center;
				    box-sizing: border-box;
				    vertical-align: middle;
				    display: flex;
				    display: -webkit-flex;
				    flex-direction: column;
				    -webkit-flex-direction: column;
				    justify-content: center;
				    -webkit-justify-content: center;
				    background-color: #ffffff;
				    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
				    border-radius: 3px;
				    border-bottom: 2px solid #d9dee4;
				}

				/* @media screen and (max-width: 1520px){
					.pzgl_dialstatistic li {
					    padding: 20px 22px;
					}
					.pz_rechargeImg {
					    width: 42%;
					}
				}
				@media screen and (max-width: 1620px){
					.pzgl_dialstatistic li {
					    padding: 21px 22px;
					}
				}
				@media screen and (max-width: 1720px){
					.pzgl_dialstatistic li {
					    padding: 22px 22px;
					}
					.pzgl_dialstatistic li p {
					    font-size: 18px;
					}
				}
				@media screen and (max-width: 1820px){
					.pzgl_dialstatistic li {
					    padding: 23px 23px;
					}
					.pzgl_dialstatistic li p {
					   font-size: 19px;
					}
				} */
				.pzgl_dialstatistic li {
				    display: inline-block;
				    width: 15.5%;
				    /* height: 174px; */
				    /* min-width: 275px; */
				    margin-right: 1.4%;
				    /* margin-bottom: 25px; */
				    /* background: url(../images/controll/blue.png) 100% 100% no-repeat; */
				    background-size: 100% 100%;
				    padding: 24px 23px;
				    text-align: center;
				    box-sizing: border-box;
				    vertical-align: middle;
				    display: flex;
				    display: -webkit-flex;
				    flex-direction: column;
				    -webkit-flex-direction: column;
				    justify-content: center;
				    -webkit-justify-content: center;
				    background-color: #ffffff;
				    box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.1);
				    border-radius: 3px;
				    border-bottom: 2px solid #d9dee4;
				}
				.pzgl_dialstatistic li:last-child {
				    margin-right: 0px;
				}
				.pzgl_dialstatistic li p.pz_dataTitle {
				    text-align: left;
				    margin-bottom: 27px;
				    font-size: 22px;
				}
				.pzgl_recharge .pzgl_rechargeZongshu {
				    width: 57%;
				    float: left;
				}
				.pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    color: #404447;
				    font-size: 18px;
				    padding: 0;
				    margin-top: 9px;
				    margin-bottom: 0px;
				}
				.pzgl_recharge .pzgl_rechargeZongshu p {
				    text-align: left;
				}
				.pzgl_recharge .pzgl_rechargeImg {
			    /* width: auto; */
					margin-right: 0px !important;
					text-align: right !important;
					float: right;
				}
				.pzgl_recharge .pzgl_rechargeImg img {
				    vertical-align: unset;
				}

				.pz_rechargeImg img {
				    width: 100%;
				    height: auto;
				}

				/* 管理员 */
				@media screen and (max-width: 1871px){
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 21px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 36px !important;
				  }
				}
				@media screen and (max-width: 1750px){
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 23px 22px;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 20px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 34px !important;
				  }
				}
				@media screen and (max-width: 1650px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 21px 21px;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 19px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 32px !important;
				  }
				}
				@media screen and (max-width: 1550px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 19px 20px;
				  }
				  .pz_rechargeImg{
				    width: 38%;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 19px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 29px !important;
				  }
				}
				@media screen and (max-width: 1450px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 18px 18px;
				  }
				  .pz_rechargeImg{
				    width: 38%;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 18px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 30px !important;
				  }
				}
				@media screen and (max-width: 1350px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 17px 17px;
				  }
				  .pz_rechargeImg{
				    width: 37%;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 17px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 27px !important;
				  }
				}
				@media screen and (max-width: 1250px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 17px 16px;
				  }
				  .pz_rechargeImg{
				    width: 37%;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 16px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 26px !important;
				  }
					.c_entrancedata_r p {
					    font-size: 15px;
					}
					.c_entrancedata_r a {
					    font-size: 13px;
					}
				}
				@media screen and (max-width: 1150px) {
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li{
				    padding: 17px 15px;
				  }
				  .pz_rechargeImg{
				    width: 40%;
				  }
				  .pzgl_dialstatistic.sj_pzgl_dialstatistic li p {
				    font-size: 16px;
				  }
				  .pzgl_recharge .pzgl_rechargeZongshu p:first-child {
				    line-height: 25px !important;
				  }
					.c_entrancedata_r p {
					    font-size: 14px;
					}
					.c_entrancedata_r a {
					    font-size: 12px;
					}
					.c_entrancedata li i {
					    margin-right: 7px;
					}
				}
				@media screen and (max-width: 1871px){

				}
				@media screen and (max-width: 1793px){

				}
				@media screen and (max-width: 1715px){

				}
				@media screen and (max-width: 1638px){

				}
				@media screen and (max-width: 1560px){

				}
				@media screen and (max-width: 1400px){

				}
				@media screen and (max-width: 1322px){
				  .c_recharge .c_rechargeImg {
				    width: 35%;
				  }
				}
				@media screen and (max-width: 1024px){
					.pzgl_recharge .pzgl_rechargeImg {
					    width: 42%;
					}
					.pzgl_recharge .pzgl_rechargeZongshu p:first-child {
					    line-height: 13px !important;
					}
					.c_entrancedata li i {
					    margin-right: 5px;
					}
				}
				</style>
				<!-- 我的数据 -->
				<ul class="pzgl_dialstatistic sj_pzgl_dialstatistic">
					<li class="c_dialliOne" title="运营商账号">
						<p class="pz_dataTitle">运营商账号</p>
						<div class="pzgl_recharge">
							<div class="pzgl_rechargeZongshu dis-inline-block"><p id="adminNum"></p></div>
							<!-- <span></span> -->
							<div class="pzgl_rechargeImg pz_rechargeImg dis-inline-block"><img src="__PUBLIC__/img/pzgly_yunyingshang.png"/></div>
						</div>
					</li>
					<li class="c_dialliOne" title="机器人可用数量/机器人总数量">
						<p class="pz_dataTitle">机器人数量</p>
						<div class="pzgl_recharge">
							<div class="pzgl_rechargeZongshu dis-inline-block"><p id="robotNum"></p></div>
							<!-- <span></span> -->
							<div class="pzgl_rechargeImg pz_rechargeImg dis-inline-block"><img src="__PUBLIC__/img/pzgly_jiqirenshuliang.png"/></div>
						</div>
					</li>
					<li class="c_dialliOne" title="线路数量">
						<p class="pz_dataTitle">线路数量</p>
						<div class="pzgl_recharge">
							<div class="pzgl_rechargeZongshu dis-inline-block"><p id="lineNum"></p></div>
							<!-- <span></span> -->
							<div class="pzgl_rechargeImg pz_rechargeImg dis-inline-block"><img src="__PUBLIC__/img/pzgly_xianlushuliang.png"/></div>
						</div>
					</li>
					<li class="c_dialliOne" title="ASR线路">
						<p class="pz_dataTitle">ASR线路</p>
						<div class="pzgl_recharge">
							<div class="pzgl_rechargeZongshu dis-inline-block"><p id="ASRNum"></p></div>
							<!-- <span></span> -->
							<div class="pzgl_rechargeImg pz_rechargeImg dis-inline-block"><img src="__PUBLIC__/img/pzgly_ASR.png"/></div>
						</div>
					</li>
					<li class="c_dialliOne" title="短信通道">
						<p class="pz_dataTitle">短信通道</p>
						<div class="pzgl_recharge">
							<div class="pzgl_rechargeZongshu dis-inline-block"><p id="smsNum"></p></div>
							<!-- <span></span> -->
							<div class="pzgl_rechargeImg pz_rechargeImg dis-inline-block"><img src="__PUBLIC__/img/pzgly_duanxintongdao.png"/></div>
						</div>
					</li>
				</ul>
				<!-- /我的数据 -->
  	  </div>
	</div>

		<div class="c_taskdata">
			<!--快捷操作-->
			<div class="panel panel-default c_quickbox c_linestate" style="flex:.7;min-height: calc(67vh);">
					<div class="panel-body" style="padding:15px 15px 15px 30px;">
						<div class="panel-top">
							<span class="panel-title"><img src="__PUBLIC__/img/kuaijiecaozuo.png" style="width:18px;height:19px;"/>快捷操作</span>
						</div>
						<!--常用功能快捷入口-->
						<div class="c_entrance">
							<!-- <p class="c_entrancetype">常用功能快捷入口</p> -->
							<ul class="c_entrancedata clearfix">
								<li>
									<i><img src="__PUBLIC__/img/pzgly_shangjialiebiao.png"></i>
									<div class="c_entrancedata_r">
										<p>招商管理</p>
										<a href="{:url('user/manager/add_account')}">去添加</a>
									</div>
								</li>
								<li>
									<i><img src="__PUBLIC__/img/pzgly_caiwuguanli.png"></i>
									<div class="c_entrancedata_r">
										<p>财务管理</p>
										<a href="{:url('user/enterprise/admin_survey')}">去查看</a>
									</div>
								</li>
								<li>
									<i><img src="__PUBLIC__/img/pzgly_quanxianguanli.png"></i>
									<div class="c_entrancedata_r">
										<p>权限管理</p>
										<a href="{:url('user/role/index')}">去设置</a>
									</div>
								</li>
								<!--<li>-->
								<!--	<i><img src="__PUBLIC__/images/controll/duanxintongdao.png"></i>-->
								<!--	<div class="c_entrancedata_r">-->
								<!--		<p>短信通道</p>-->
								<!--		<a href="{:url('user/sms/channel')}">去使用</a>-->
								<!--	</div>-->
								<!--</li>-->

								<!--<li>-->
								<!--	<i><img src="__PUBLIC__/images/controll/gongzhonghaopeizhi.png"></i>-->
								<!--	<div class="c_entrancedata_r">-->
								<!--		<p>公众号配置</p>-->
								<!--		<a href="{:url('user/weixin/index')}">去使用</a>-->
								<!--	</div>-->
								<!--</li>-->
								<!--<li>-->
								<!--	<i><img src="__PUBLIC__/images/controll/quanxianfenlei.png"></i>-->
								<!--	<div class="c_entrancedata_r">-->
								<!--		<p>菜单管理</p>-->
								<!--		<a href="{:url('user/menu/index')}">去设置</a>-->
								<!--	</div>-->
								<!--</li>-->
								<!--<li>-->
								<!--	<i><img src="__PUBLIC__/images/controll/jueseguanli.png"></i>-->
								<!--	<div class="c_entrancedata_r">-->
								<!--		<p>角色管理</p>-->
								<!--		<a href="{:url('user/role/index')}">去设置</a>-->
								<!--	</div>-->
								<!--</li>-->
							</ul>
						</div>
						<!--其他功能快捷入口-->
						<!--<div class="c_entrance c_entrance_t">-->
						<!--	<p class="c_entrancetype">其他功能快捷入口</p>-->
						<!--	<ul class="c_entrancedata clearfix">-->
						<!--		<li>-->
						<!--			<i><img src="__PUBLIC__/images/controll/xianluguanli.png"></i>-->
						<!--			<div class="c_entrancedata_r">-->
						<!--				<p>线路管理</p>-->
						<!--				<a href="{:url('user/device/lines')}">去使用</a>-->
						<!--			</div>-->
						<!--		</li>-->
								<!--<li>-->
								<!--	<i><img src="__PUBLIC__/images/controll/duanxintongdao.png"></i>-->
								<!--	<div class="c_entrancedata_r">-->
								<!--		<p>短信通道</p>-->
								<!--		<a href="{:url('user/sms/channel')}">去使用</a>-->
								<!--	</div>-->
								<!--</li>-->
						<!--		<li>-->
						<!--			<i><img src="__PUBLIC__/images/controll/jiqirenguanli.png"></i>-->
						<!--			<div class="c_entrancedata_r">-->
						<!--				<p>机器人管理</p>-->
						<!--				<a href="{:url('user/device/robot_distribution')}">去使用</a>-->
						<!--			</div>-->
						<!--		</li>-->
						<!--		<li>-->
						<!--			<i><img src="__PUBLIC__/images/controll/gongzhonghaopeizhi.png"></i>-->
						<!--			<div class="c_entrancedata_r">-->
						<!--				<p>公众号配置</p>-->
						<!--				<a href="{:url('user/weixin/index')}">去使用</a>-->
						<!--			</div>-->
						<!--		</li>-->
						<!--	</ul>-->
						<!--</div>-->
					</div>
			</div>
			<!--线路状况-->
			<div class="panel panel-default c_linestate" style="width:51%;float:right;min-height: calc(67vh);">
				<!-- height:315px; -->
			  <div class="panel-body">
					<div class="panel-top">
						<span class="panel-title"><i class="icon iconfont icon-weibiaoti--" style="color:#b3b3b3;margin-right:8px;"></i>线路状况</span>
						<div class="pull-right c_linebutton">
							<a href="javascript:;" class="active" onclick="getDay(this)" date-value='1'>当天</a>
							<!--<a href="javascript:;" onclick="getDay(this)"  date-value='7'>7天</a>
							<a href="javascript:;" onclick="getDay(this)" date-value='30'>30天</a>-->
						</div>
					</div>
					<div class="c_linedata">
						<div class="table-responsive pz_innerbox_lay" style="overflow-y: scroll;max-height: 450px;">
							<table class="table table-bordered table-hover">
									<thead class="ant-table-thead">
										<tr> 
											<th style="width: 26%;">线路商名称</th>
											<th>接通率</th>
											<th>计费时长</th>
											<th>通话计费</th>
										</tr>
									</thead>
									<tbody class="ant-table-tbody" id="datadisplay">
									</tbody>
							</table>
						</div>
					</div>
			  </div>
			</div>
		</div>
	</div>
</div>

<div class="l_loadfixed" style="display: none;">
	<div class="l_loaddata">
		<p><img src="/public/img_sj/reload.gif" alt="">正在查询中...</p>
		<p>   </p>
	</div>
</div>
<!-- 用户协议提示 -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="myModalLabel">用户协议</h4>
				</div>
				<div class="modal-body">
					  <div>
							<p><b>用户业务承诺书</b></p>

					  <p>
							为保证平台健康、稳定运行，所有平台使用方需知悉并确认，一旦平台发现使用方利用平台进行违法行为，平台有权立即停止服务，不退还所有已付款项，
并立即向有关机关报案。承诺内容包含但不限于如下：
						</p>
						<p>
							一、使用平台进行外呼业务，遵守国家有关法律、法规和各行政规章制度。不开展任何违法、违规业务。
							</p>
							<p>
							二、不利用平台开展各种形式违反社会公德和商业操守的外呼业务。
						</p>
						<p>
							三、不利用提供的平台资源从事危害国家安全、泄露国家机密等违法犯罪行为。
						</p>
						<p>
							四、不利用平台传播妨碍社会治安和宣传封建迷信、淫秽黄色等信息；窃取、泄露国家秘密、情报或者军事机密；煽动民族仇恨、民族歧视，破坏民族团结；组织邪教活动、联络邪教组织成员破坏国家法律、行政法规实施。
						</p>
						<p>
							五、不利用平台进行窃取、诈骗、敲诈勒索。
							</p>
							<p>
							六、用户明确表示拒绝后，不得继续向其发起呼叫。
						</p>
						<p>
							七、规范外呼时段、频率行为等，不得对用户正常生活造成影响。
						</p>

	        	</div>
				</div>
				<div class="modal-footer">

					<div class="checkbox" style="float:left;">
						<label>
							<input type="checkbox" value="1" name="isagreeshow" id="isagreeshow"> 不再显示
						</label>
					</div>

					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>

				</div>
    </div>
  </div>

	<script type='text/template' id='line_template'>
		<tr>
			<td>{%line_name%}</td>
			<td>{%answer_rate%}%</td>
			<td>{%call_duration%}分钟</td>
			<td>{%call_money%}元</td>
		</tr>
	</script>
	<script type="text/javascript">
		//获取首页各种数据
		getData();
		get_lines_details(1);
		$('.c_linebutton > a').click(function(){
			if($(this).hasClass('active') === false){
				$(this).addClass('active').siblings().removeClass('active');
				var duration = $(this).data('type');
				if(duration == 1){
					get_lines_details(1);
				}else if(duration == 2){
					get_lines_details(7);
				}else if(duration == 3){
					get_lines_details(30);
				}
			}
		});
		function getData(){
			 $(".l_loadfixed").show();
			 var url = '{:url("user/index/get_every_data")}';
			 	$.ajax({
				type:'POST',
				dataType:'json',
				url:url,
				success:function(result){
					$(".l_loadfixed").hide();
					var adminNum = result.data.adminNum;
					var robotNum = result.data.robotNum;
					var lineNum = result.data.lineNum;
					var ASRNum = result.data.ASRNum;
					var smsNum = result.data.smsNum;
					$("#adminNum").text(adminNum);   
					$("#robotNum").text(robotNum);    
					$("#lineNum").text(lineNum); 
					$("#ASRNum").text(ASRNum);
					$("#smsNum").text(smsNum);
				},
			 	error:function(){
					// console.log('获取线路数据失败');
				},	
			 	})
		}
		
		
		
		
		//点击对话框 得到天数信息
		function getDay(obj){
			var time = $(obj).attr('date-value');
			get_lines_details(time);
		}
		//获取线路详情
		function get_lines_details(time=1)
		{
			var url = '{:url("user/index/get_new_line_info_by_redis")}';
			$.ajax({
				type:'POST',
				dataType:'json',
				data:{
					time:time
				},
				url:url,
				success:function(result){
					if(result.code === 0){
						console.log(result);
						var htmls = '';
						$.each(result.data, function(index, object){
							var html = $('#line_template').html();
									html = html.replace('{%line_name%}', object.phone_name);
									html = html.replace('{%answer_rate%}', object.yingda);
									html = html.replace('{%call_duration%}', object.duration);
									html = html.replace('{%call_money%}', object.money);
									htmls += html;
						});
						$('#datadisplay').html(htmls);
					}
					console.log(result);
				},
				error:function(){
					// console.log('获取线路数据失败');
				}
			});
		}
		$('#myModal').on('hidden.bs.modal', function (e) {

		  var isagreeshow =	$("#isagreeshow").prop('checked');

			if(isagreeshow){

				 	$.ajax({
				 		type: "POST",
				 		dataType:'json',
				 		url: "{:url('changeShow')}",
				 		cache: false,
				 		data:{},
				 		success: function(res) {

				 			console.log(res);

				 		},
				 		error: function(data) {
				 		 // alert("获取数据失败");
				 		}
				 	});
			}


		})

	</script>



</div>
{include file="index/dialog" /}
{/block}
